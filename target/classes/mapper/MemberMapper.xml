<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.MemberMapper">

	<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 boardVO 는 mybatis-confg.xml 에 Alias 되어
		있습니다. -->
	<!-- 	<insert id="insertUser" parameterType="domain.UserVO">
            INSERT INTO MEMNO
            (
            , NICKNAME
            ,ID
            ,PHONENUM
            ,EMAIL
            ,PW
            ,NAME
            , ADDRESS
            ,CONPANYNO
            ,BIRTH
            ,RANK
            )
        VALUES
        (
            #{ID}
            ,#{PHONENUM}
            ,#{EMAIL}
            ,#{PW}
            ,#{NAME}
            ,#{ADDRESS}
            ,#{CONPANYNO}
            ,#{BIRTH}
            ,#{RANK}
            ,SYSDATE
        )
        </insert> -->


	<select id ="login" resultType="domain.MemberVO">
		SELECT MEMNO,
			   NICKNAME,
			   ID,
			   PHONENUM,
			   PW,
			   NAME,
			   ADDRESS,
			   COMPANYNO,
			   BIRTH,
			   MEMIMG,
			   RANK
		FROM MEMBER
		WHERE ID = #{id}
		  AND PW = #{pw}
	</select>
	<!-- <update id="keepLogin"> -->
	<update id ="keepLogin" >
		UPDATE MEMBER SET SESSIONKEY = #{sessionId}, SESSIONLIMIT = #{next}
		WHERE ID = #{id}
	</update>

	<select id ="checkMemberWithSessionKey" resultType="domain.MemberVO">
		SELECT* FROM MEMBER
		WHERE SESSIONKEY = #{value} AND SESSIONLIMIT > SYSDATE</select>



</mapper>
